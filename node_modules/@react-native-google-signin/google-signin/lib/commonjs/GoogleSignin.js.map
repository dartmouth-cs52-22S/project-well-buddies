{"version":3,"sources":["GoogleSignin.ts"],"names":["RNGoogleSignin","NativeModules","IS_IOS","Platform","OS","GoogleSignin","constructor","__DEV__","console","error","signIn","options","configPromise","hasPlayServices","showPlayServicesUpdateDialog","undefined","Error","playServicesAvailable","configure","offlineAccess","webClientId","addScopes","isSignedIn","getCurrentUser","signInSilently","signOut","revokeAccess","clearCachedAccessToken","tokenString","Promise","reject","getTokens","tokens","userObject","idToken","accessToken","GoogleSigninSingleton","statusCodes","SIGN_IN_CANCELLED","IN_PROGRESS","PLAY_SERVICES_NOT_AVAILABLE","SIGN_IN_REQUIRED"],"mappings":"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","sourcesContent":["import { NativeModules, Platform } from 'react-native';\nimport type {\n  AddScopesParams,\n  SignInParams,\n  ConfigureParams,\n  HasPlayServicesParams,\n  User,\n} from './types';\n\nconst { RNGoogleSignin } = NativeModules;\n\nconst IS_IOS = Platform.OS === 'ios';\n\nclass GoogleSignin {\n  configPromise?: Promise<void>;\n\n  constructor() {\n    if (__DEV__ && !RNGoogleSignin) {\n      console.error(\n        `RN GoogleSignin native module is not correctly linked. Please read the readme, setup and troubleshooting instructions carefully or try manual linking. If you're using Expo, please use expo-google-sign-in. This is because Expo does not support custom native modules.`,\n      );\n    }\n  }\n\n  async signIn(options: SignInParams = {}): Promise<User> {\n    await this.configPromise;\n    return await RNGoogleSignin.signIn(options);\n  }\n\n  async hasPlayServices(\n    options: HasPlayServicesParams = { showPlayServicesUpdateDialog: true },\n  ): Promise<boolean> {\n    if (IS_IOS) {\n      return true;\n    } else {\n      if (options && options.showPlayServicesUpdateDialog === undefined) {\n        throw new Error(\n          'RNGoogleSignin: Missing property `showPlayServicesUpdateDialog` in options object for `hasPlayServices`',\n        );\n      }\n      return RNGoogleSignin.playServicesAvailable(options.showPlayServicesUpdateDialog);\n    }\n  }\n\n  configure(options: ConfigureParams = {}): void {\n    if (options.offlineAccess && !options.webClientId) {\n      throw new Error('RNGoogleSignin: offline use requires server web ClientID');\n    }\n\n    this.configPromise = RNGoogleSignin.configure(options);\n  }\n\n  async addScopes(options: AddScopesParams): Promise<User | null> {\n    const isSignedIn = await this.isSignedIn();\n    if (!isSignedIn) {\n      return null;\n    }\n    return IS_IOS ? RNGoogleSignin.addScopes(options) : RNGoogleSignin.getCurrentUser();\n  }\n\n  async signInSilently(): Promise<User> {\n    await this.configPromise;\n    return RNGoogleSignin.signInSilently();\n  }\n\n  async signOut(): Promise<null> {\n    return RNGoogleSignin.signOut();\n  }\n\n  async revokeAccess(): Promise<null> {\n    return RNGoogleSignin.revokeAccess();\n  }\n\n  async isSignedIn(): Promise<boolean> {\n    return RNGoogleSignin.isSignedIn();\n  }\n\n  async getCurrentUser(): Promise<User | null> {\n    return RNGoogleSignin.getCurrentUser();\n  }\n\n  async clearCachedAccessToken(tokenString: string): Promise<null> {\n    if (!tokenString || typeof tokenString !== 'string') {\n      return Promise.reject('GoogleSignIn: clearCachedAccessToken() expects a string token.');\n    }\n    return IS_IOS ? null : await RNGoogleSignin.clearCachedAccessToken(tokenString);\n  }\n\n  async getTokens(): Promise<{ idToken: string; accessToken: string }> {\n    if (IS_IOS) {\n      const tokens = await RNGoogleSignin.getTokens();\n      return tokens;\n    } else {\n      const userObject = await RNGoogleSignin.getTokens();\n      return {\n        idToken: userObject.idToken,\n        accessToken: userObject.accessToken,\n      };\n    }\n  }\n}\n\nexport const GoogleSigninSingleton = new GoogleSignin();\n\nexport const statusCodes = {\n  SIGN_IN_CANCELLED: RNGoogleSignin.SIGN_IN_CANCELLED,\n  IN_PROGRESS: RNGoogleSignin.IN_PROGRESS,\n  PLAY_SERVICES_NOT_AVAILABLE: RNGoogleSignin.PLAY_SERVICES_NOT_AVAILABLE,\n  SIGN_IN_REQUIRED: RNGoogleSignin.SIGN_IN_REQUIRED,\n};\n"]}